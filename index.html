<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NUDAKE</title>
    <!-- Font link -->
    <link href="https://fonts.googleapis.com/css2?family=Kranky&family=Iowan+Old+Style:ital,wght@0,400;0,700&family=Irish+Grover&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="src/card.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        :root {
            --box-width: 180px;
            --box-height: calc(var(--box-width) * 1.387);
            --box-depth: calc(var(--box-width) * 0.27355);
            --box-grey: #ececec;
            --card-width: calc(var(--box-width) * 0.9);
            --card-height: calc(var(--card-width) * 1.3944);
            --card-gap: calc(var(--box-width) / 50);
            --color1: rgb(192, 0, 100);
            --color2: rgb(225, 143, 0);
        }

        body {
            font-family: 'Kranky', cursive;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 0;
            background-color: #FFFFFF;
            cursor: default;
        }

        .main-image {
            margin-top: 50px;
            display: flex;
            width: 100%;
        }

        .main-image img {
            width: 50%;
            object-fit: cover;
        }

        .card-image {
            width: 100%;
            /* max-width: 1000px; 최대 너비를 적절히 설정 */
            height: auto; /* 세로 크기를 자동으로 */
            display: flex;
            justify-content: center;
            gap: 30px;
            position: absolute;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%);
        }        
        .cards {
            display: flex;
            flex-direction: row; /* 가로 정렬 (기본값) */
            width: 60%;
            /* gap: 30px; 카드 간 간격 */
            margin: 10px; /* 기존 20px에서 10px로 간격 축소 */
        }


        /* .card {
            position: relative;
            width: var(--card-width);
            height: auto;
            overflow: hidden;
            transition: transform 0.5s ease, box-shadow 0.2s ease;
            will-change: transform, filter;
            background-color: #040712;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: 50% 50%;
            transform-origin: center;
            border-radius: 5% / 3.5%;
            box-shadow: -5px -5px 5px -5px var(--color1), 5px 5px 5px -5px var(--color2), -7px -7px 10px -5px transparent, 7px 7px 10px -5px transparent, 0 0 5px 0px rgba(255,255,255,0), 0 55px 35px -20px rgba(0, 0, 0, 0.5);
            z-index: 10;
        }

        .card::before,
        .card::after {
            content: "";
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            top: 0;
            background-repeat: no-repeat;
            opacity: 0.8;
            mix-blend-mode: color-dodge;
            transition: all 0.33s ease;
        }

        .card::before {
            background-position: 50% 50%;
            background-size: 300% 300%;
            background-image: linear-gradient(115deg, transparent 0%, var(--color1) 25%, transparent 47%, transparent 53%, var(--color2) 75%, transparent 100%);
            filter: brightness(0.5) contrast(1);
            z-index: 1;
        }

        .card::after {
            background-image: url("https://assets.codepen.io/13471/sparkles.gif"), url("https://assets.codepen.io/13471/holo.png"), linear-gradient(125deg, #ff008450 15%, #fca40040 30%, #ffff0030 40%, #00ff8a20 60%, #00cfff40 70%, #cc4cfa50 85%);
            background-position: 50% 50%;
            background-size: 160%;
            background-blend-mode: overlay;
            z-index: 30;
            filter: brightness(1) contrast(1);
            transition: all 0.33s ease;
            mix-blend-mode: color-dodge;
            opacity: 0.8;
        }

        .card:hover::before,
        .card:hover::after {
            filter: brightness(1) contrast(1);
            opacity: 1;
        }*/

        .main-text {
            position: relative;
            width: 100%;
            font-family: 'Iowan Old Style', serif;
        }

        .main-text img {
            width: 100%;
            display: block;
        }

        .text-overlay {
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #000000;
            font-size: 24px;
            font-weight: bold;
            padding: 20px;
            border-radius: 10px;
        }

        .sub-text {
            font-family: 'Irish Grover', cursive;
        }

        .slider-container {
            position: absolute;
            top: 60%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 800px;
            height: 800px;
            overflow: hidden;
            margin-top: 100px;
        }

        .slider {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .slider img {
            width: 800px;
            height: 800px;
            object-fit: cover;
        }

        .navigation {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            transform: translateY(-50%);
        }

        .navigation button {
            color: black;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 36px;
        }

        .navigation button:hover {
            color: #000;
        }



    </style>
</head>
<body>
    <div class="main-image">
        <img src="src/specter.png" alt="Halloween Ghost">
        <img src="src/box.png" alt="Halloween Ghost">
    </div>

    <div class="main-text text-margin">
        <img src="src/back_orange.png" alt="Background Image">

        <div class="text-overlay">
            <div class="main-text">
                The Halloween ghost is still wandering around, hiding its secrets. <br> Don’t be deceived by what you see!
            </div>
            <br>
            <div class="sub-text">
                PS: Sweet, Tangy, and Sour!
            </div>
        </div>

        <!-- Card Section -->
        <div class = "card-image">
            <div class="cards">
                <img class="card charizard animated" alt="Halloween Card">
                <img class="card mewtwo animated"  alt="Halloween Card">
                <img class="card pika animated" alt="Halloween Card">
            </div>
        </div>

        <!-- Slider Section -->
        <div class="slider-container">
            <div class="slider">
                <img src="src/cakes/main_cake.png" alt="Image 1">
                <img src="src/cakes/amber.png" alt="Image 2">
                <img src="src/cakes/pink.png" alt="Image 3">
                <img src="src/cakes/purple1.png" alt="Image 4">
            </div>
            <div class="navigation">
                <button id="prevBtn"></button>
                <button id="nextBtn">> </button>
            </div>
        </div>
    </div>

    <style class="hover"></style>

    <script>
        // Slider Animation
        const slider = document.querySelector('.slider');
        const images = document.querySelectorAll('.slider img');
        const prevButton = document.getElementById('prevBtn');
        const nextButton = document.getElementById('nextBtn');

        let currentIndex = 0;

        const updateSliderPosition = () => {
            slider.style.transform = `translateX(${-currentIndex * 800}px)`;
        };

        prevButton.addEventListener('click', () => {
            currentIndex = (currentIndex > 0) ? currentIndex - 1 : images.length - 1;
            updateSliderPosition();
        });

        nextButton.addEventListener('click', () => {
            currentIndex = (currentIndex < images.length - 1) ? currentIndex + 1 : 0;
            updateSliderPosition();
        });

        // Holo Effect Animation
        // var x;
        // var $cards = $(".card-image img");
        // var $style = $(".hover");

        // $cards
        //     .on("mousemove touchmove", function(e) {
        //         var pos = [e.offsetX, e.offsetY];
        //         e.preventDefault();
        //         if (e.type === "touchmove") {
        //             pos = [e.touches[0].clientX, e.touches[0].clientY];
        //         }
        //         var $card = $(this);
        //         var l = pos[0];
        //         var t = pos[1];
        //         var h = $card.height();
        //         var w = $card.width();
        //         var px = Math.abs(Math.floor(100 / w * l) - 100);
        //         var py = Math.abs(Math.floor(100 / h * t) - 100);
        //         var pa = (50 - px) + (50 - py);
        //         var lp = (50 + (px - 50) / 1.5);
        //         var tp = (50 + (py - 50) / 1.5);
        //         var px_spark = (50 + (px - 50) / 7);
        //         var py_spark = (50 + (py - 50) / 7);
        //         var p_opc = 40 + (Math.abs(pa) * 1.5); // Increased base opacity for better visibility
        //         var ty = ((tp - 50) / 2) * -1;
        //         var tx = ((lp - 50) / 1.5) * 0.5;
        //         var grad_pos = `background-position: ${lp}% ${tp}%;`;
        //         var sprk_pos = `background-position: ${px_spark}% ${py_spark}%;`;
        //         var opc = `opacity: ${p_opc / 100};`;
        //         var tf = `transform: rotateX(${ty}deg) rotateY(${tx}deg)`;
        //         var style = `
        //             .card:hover::before { ${grad_pos} }
        //             .card:hover::after { ${sprk_pos} ${opc} }
        //         `;
        //         $cards.removeClass("active");
        //         $card.removeClass("animated");
        //         $card.attr("style", tf);
        //         $style.html(style);
        //         if (e.type === "touchmove") {
        //             return false;
        //         }
        //         clearTimeout(x);
        //     }).on("mouseout touchend touchcancel", function() {
        //         var $card = $(this);
        //         $style.html("");
        //         $card.removeAttr("style");
        //         $card.addClass("animated");
        //     });
        var x;
var $cards = $(".card");
var $style = $(".hover");

$cards
  .on("mousemove touchmove", function(e) { 
    // normalise touch/mouse
    var pos = [e.offsetX,e.offsetY];
    e.preventDefault();
    if ( e.type === "touchmove" ) {
      pos = [ e.touches[0].clientX, e.touches[0].clientY ];
    }
    var $card = $(this);
    // math for mouse position
    var l = pos[0];
    var t = pos[1];
    var h = $card.height();
    var w = $card.width();
    var px = Math.abs(Math.floor(100 / w * l)-100);
    var py = Math.abs(Math.floor(100 / h * t)-100);
    var pa = (50-px)+(50-py);
    // math for gradient / background positions
    var lp = (50+(px - 50)/1.5);
    var tp = (50+(py - 50)/1.5);
    var px_spark = (50+(px - 50)/7);
    var py_spark = (50+(py - 50)/7);
    var p_opc = 20+(Math.abs(pa)*1.5);
    var ty = ((tp - 50)/2) * -1;
    var tx = ((lp - 50)/1.5) * .5;
    // css to apply for active card
    var grad_pos = `background-position: ${lp}% ${tp}%;`
    var sprk_pos = `background-position: ${px_spark}% ${py_spark}%;`
    var opc = `opacity: ${p_opc/100};`
    var tf = `transform: rotateX(${ty}deg) rotateY(${tx}deg)`
    // need to use a <style> tag for psuedo elements
    var style = `
      .card:hover:before { ${grad_pos} }  /* gradient */
      .card:hover:after { ${sprk_pos} ${opc} }   /* sparkles */ 
    `
    // set / apply css class and style
    $cards.removeClass("active");
    $card.removeClass("animated");
    $card.attr( "style", tf );
    $style.html(style);
    if ( e.type === "touchmove" ) {
      return false; 
    }
    clearTimeout(x);
  }).on("mouseout touchend touchcancel", function() {
    // remove css, apply custom animation on end
    var $card = $(this);
    $style.html("");
    $card.removeAttr("style");
    x = setTimeout(function() {
      $card.addClass("animated");
    },2500);
  });
    </script>
</body>
</html>
